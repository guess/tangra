{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block head %}
  {% load staticfiles %}
  <link href="{% static 'css/investigator/dashboard.css' %}" rel="stylesheet">
{% endblock %}


{% block content %}

<div class="container-fluid">
  <div class="row">
    <div class="col-sm-3 col-md-2 sidebar">
      <ul class="nav nav-sidebar">
        <li class="active"><a href="#">Overview</a></li>
        <li><a href="#">Reports</a></li>
        <li><a href="#">Analytics</a></li>
        <li><a href="#">Export</a></li>
      </ul>
      <ul class="nav nav-sidebar">
        <li><a href="">All Participants</a></li>
        <li><a href="">Kennedy Lodge</a></li>
        <li><a href="">Kennedy Lodge (Family)</a></li>
        <li><a href="">Kensington Health</a></li>
        <li><a href="">Kensington (Family)</a></li>
        <li><a href="">Leaside</a></li>
        <li><a href="">Leaside (Family)</a></li>
      </ul>
      <ul class="nav nav-sidebar">
        <li><a href="">Email participants</a></li>
        <li><a href="">Help / Support</a></li>
      </ul>
    </div>
    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
      <h1 class="page-header">Dashboard</h1>

      <div class="row placeholders">
        <div class="col-xs-6 col-sm-3 placeholder">
          <!--img data-src="holder.js/200x200/auto/sky" class="img-responsive" alt="Generic placeholder thumbnail"-->
          <img src="{% static 'img/blue-stat.png' %}" class="img-responsive">
          <h4>All</h4>
          <span class="text-muted">InTouch usage</span>
        </div>
        <div class="col-xs-6 col-sm-3 placeholder">
          <!--img data-src="holder.js/200x200/auto/vine" class="img-responsive" alt="Generic placeholder thumbnail"-->
          <img src="{% static 'img/green-stat.png' %}" class="img-responsive">
          <h4>Kennedy</h4>
          <span class="text-muted">InTouch usage</span>
        </div>
        <div class="col-xs-6 col-sm-3 placeholder">
          <!--img data-src="holder.js/200x200/auto/sky" class="img-responsive" alt="Generic placeholder thumbnail"-->
          <img src="{% static 'img/blue-stat.png' %}" class="img-responsive">
          <h4>Kensington</h4>
          <span class="text-muted">InTouch usage</span>
        </div>
        <div class="col-xs-6 col-sm-3 placeholder">
          <!--img data-src="holder.js/200x200/auto/vine" class="img-responsive" alt="Generic placeholder thumbnail"-->
          <img src="{% static 'img/green-stat.png' %}" class="img-responsive">
          <h4>Leaside</h4>
          <span class="text-muted">InTouch usage</span>
        </div>
      </div>

      {% for group in groups %}
      <h2 class="sub-header">{{group.name}}</h2>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>User ID</th>
              <th>Username</th>
              <th>Current Stage</th>
              <th>Progress</th>
            </tr>
          </thead>
          <tbody>
            {% for participant in group.users.all %}
            <tr>
              <td>{{participant.id}}</td>
              <td>{{participant.username}}</td>
              <td>{{stage_names|get_item:participant.id}}</td>
              <td>
                <div class="progress" style="margin-bottom:0px">
                  <div  class="progress-bar progress-bar-success"
                        role="progressbar"
                        aria-valuenow="{{ progress|get_item:participant.id}}"
                        aria-valuemin="0"
                        aria-valuemax="100"
                        style="width: {{ progress|get_item:participant.id}}%">
                        {{ progress|get_item:participant.id}}%
                  </div>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <br>
      {% endfor %}
    </div>
  </div>
</div>

{% endblock %}
